<h1>Valves</h1>
<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Auto</th>
      <th>Close</th>
      <th>Open</th>
      <!-- th>Closed</th>
            <th>Opened</th-->
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let valve of valves" [ngClass]="getRowClass(valve)">
      <th>{{valve.name}}</th>
      <td><button class="btn btn-default" disabled>Auto</button></td>
      <td><button class="btn btn-default" (mousedown)="startClosingValve(valve)" (mouseup)="stopClosingValve(valve)">Close</button></td>
      <td><button class="btn btn-default" (mousedown)="startOpeningValve(valve)" (mouseup)="stopOpeningValve(valve)">Open</button></td>
      <!-- td class="danger">{{valve.getStatus()}}</td>
            <td class="success"></td-->
    </tr>
  </tbody>
</table>
<br />
<h1>Controllers</h1>
<button class="btn btn-md" (click)="openModal()">Open modal</button>
<div *ngFor="let pidController of pidControllers">
  <h2>{{pidController.name}}</h2>
  <button class="btn btn-md" (click)="togglePidCtrlMode(pidController)">{{pidController.config.mode}}</button>
  <table class="table table-striped">
    <thead>
      <tr>
        <th style="width: 20%"> </th>
        <th style="width: 10%">Act. Value </th>
        <th style="width: 70%">New Value </th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><label>Temp:</label></td>
        <td><span>{{ pidController.data.temperature | number:'2.1-2' }} C</span></td>
      </tr>
      <tr>
        <td><label>Set Point:</label></td>
        <td><span>{{pidController.config.setPoint}}</span></td>
        <td><input [(ngModel)]="pidController.newConfig.setPoint" type="number"></td>
      </tr>
      <tr>
        <td><label>Output:</label></td>
        <td><span>{{pidController.data.output}}</span></td>
        <td><input [(ngModel)]="pidController.newConfig.output" type="number"></td>
      </tr>
      <tr>
        <td><label>Kp:</label></td>
        <td><span>{{pidController.config.kp}}</span></td>
        <td><input [(ngModel)]="pidController.newConfig.kp" type="number"></td>
      </tr>
      <tr>
        <td><label>Ki:</label></td>
        <td><span>{{pidController.config.ki}}</span></td>
        <td><input [(ngModel)]="pidController.newConfig.ki" type="number"></td>
      </tr>
      <tr>
        <td><label>Kd:</label></td>
        <td><span>{{pidController.config.kd}}</span></td>
        <td><input [(ngModel)]="pidController.newConfig.kd" type="number"></td>
      </tr>
      <tr>
        <td><button class="btn btn-block" (click)="setPidController(pidController)">Set</button></td>
      </tr>
    </tbody>
  </table>
</div>
<br />
<h1>Pumps</h1>
<table class="table table-striped">
  <thead>
    <tr>
      <th>Name</th>
      <th>Auto</th>
      <th>Stop</th>
      <th>Start</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let motor of motors">
      <td>{{motor.getName()}}</td>
      <td><button class="btn btn-default" disabled>Auto</button></td>
      <td><button class="btn btn-default" (click)="stopMotor(motor)">Stop</button></td>
      <td><button class="btn btn-default" (click)="startMotor(motor)">Start</button></td>
    </tr>
  </tbody>
</table>
